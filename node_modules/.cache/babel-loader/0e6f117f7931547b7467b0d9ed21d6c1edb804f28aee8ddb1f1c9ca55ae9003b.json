{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  var _component_PlayerStats = _resolveComponent(\"PlayerStats\");\n  var _component_GameBoard = _resolveComponent(\"GameBoard\");\n  var _component_GameControls = _resolveComponent(\"GameControls\");\n  return _openBlock(), _createElementBlock(\"div\", null, [_createVNode(_component_PlayerStats, {\n    playersData: $props.gameData.state.playersData\n  }, null, 8 /* PROPS */, [\"playersData\"]), _createVNode(_component_GameBoard, {\n    state: $props.gameData.state,\n    currentPlayer: $props.gameData.state.turn,\n    onMove: $setup.makeMove\n  }, null, 8 /* PROPS */, [\"state\", \"currentPlayer\", \"onMove\"]), _createVNode(_component_GameControls, {\n    onAddMonster: $setup.addMonster,\n    onEndTurn: $setup.endTurn\n  }, null, 8 /* PROPS */, [\"onAddMonster\", \"onEndTurn\"])]);\n}","map":{"version":3,"names":["_createElementBlock","_createVNode","_component_PlayerStats","playersData","$props","gameData","state","_component_GameBoard","currentPlayer","turn","onMove","$setup","makeMove","_component_GameControls","onAddMonster","addMonster","onEndTurn","endTurn"],"sources":["F:\\CCT\\2 SEMESTER\\Concurrent_Systems\\CA2\\project-framework\\monster_mayhem\\src\\components\\MatchLogic.vue"],"sourcesContent":["<template>\r\n    <div>\r\n      <PlayerStats :playersData=\"gameData.state.playersData\" />\r\n      <GameBoard :state=\"gameData.state\" :currentPlayer=\"gameData.state.turn\" @move=\"makeMove\" />\r\n      <GameControls @addMonster=\"addMonster\" @endTurn=\"endTurn\" />\r\n    </div>\r\n  </template>\r\n  \r\n  <script>\r\n  import { ref } from 'vue';\r\n  import { db } from '../services/firebaseConfig';\r\n  import { doc, updateDoc } from 'firebase/firestore';\r\n  import GameBoard from './GameBoard.vue';\r\n  import GameControls from './GameControls.vue';\r\n  import PlayerStats from './PlayerStats.vue';\r\n  \r\n  export default {\r\n    name: 'MatchLogic',\r\n    props: {\r\n      gameData: {\r\n        type: Object,\r\n        required: true,\r\n      },\r\n    },\r\n    components: {\r\n      GameBoard,\r\n      GameControls,\r\n      PlayerStats,\r\n    },\r\n    setup(props) {\r\n      const gameId = ref(props.gameData.id);\r\n  \r\n      const addMonster = async (monsterType) => {\r\n        const newState = { ...props.gameData.state };\r\n        const currentPlayer = newState.turn;\r\n        const playerMonsters = newState.playersData[currentPlayer].monsters;\r\n        playerMonsters.push({ type: monsterType, position: getRandomPositionForPlayer(currentPlayer) });\r\n        await updateDoc(doc(db, 'games', gameId.value), { state: newState });\r\n      };\r\n  \r\n      const makeMove = async (move) => {\r\n        const newState = { ...props.gameData.state };\r\n        const playerMonsters = newState.playersData[move.playerId].monsters;\r\n        playerMonsters[move.index].position = move.newPosition;\r\n        await updateDoc(doc(db, 'games', gameId.value), { state: newState });\r\n      };\r\n  \r\n      const endTurn = async () => {\r\n        const newState = { ...props.gameData.state };\r\n        newState.turn = getNextTurn(newState.playersData, newState.turn);\r\n        await updateDoc(doc(db, 'games', gameId.value), { state: newState });\r\n      };\r\n  \r\n      const getNextTurn = (playersData, currentTurn) => {\r\n        const playerIds = Object.keys(playersData);\r\n        const currentIndex = playerIds.indexOf(currentTurn);\r\n        return playerIds[(currentIndex + 1) % playerIds.length];\r\n      };\r\n  \r\n      const getRandomPositionForPlayer = (playerId) => {\r\n        // Implementar lógica para retornar uma posição aleatória válida para o jogador\r\n      };\r\n  \r\n      return {\r\n        addMonster,\r\n        makeMove,\r\n        endTurn,\r\n      };\r\n    },\r\n  };\r\n  </script>\r\n  \r\n  <style scoped>\r\n  /* Seus estilos aqui */\r\n  </style>\r\n  "],"mappings":";;;;;uBACIA,mBAAA,CAIM,cAHJC,YAAA,CAAyDC,sBAAA;IAA3CC,WAAW,EAAEC,MAAA,CAAAC,QAAQ,CAACC,KAAK,CAACH;4CAC1CF,YAAA,CAA2FM,oBAAA;IAA/ED,KAAK,EAAEF,MAAA,CAAAC,QAAQ,CAACC,KAAK;IAAGE,aAAa,EAAEJ,MAAA,CAAAC,QAAQ,CAACC,KAAK,CAACG,IAAI;IAAGC,MAAI,EAAEC,MAAA,CAAAC;iEAC/EX,YAAA,CAA4DY,uBAAA;IAA7CC,YAAU,EAAEH,MAAA,CAAAI,UAAU;IAAGC,SAAO,EAAEL,MAAA,CAAAM","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}