{"ast":null,"code":"import { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, resolveComponent as _resolveComponent, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nvar _withScopeId = function _withScopeId(n) {\n  return _pushScopeId(\"data-v-152f0040\"), n = n(), _popScopeId(), n;\n};\nvar _hoisted_1 = /*#__PURE__*/_withScopeId(function () {\n  return /*#__PURE__*/_createElementVNode(\"h1\", null, \"Game\", -1 /* HOISTED */);\n});\nvar _hoisted_2 = {\n  key: 0\n};\nvar _hoisted_3 = {\n  key: 1\n};\nvar _hoisted_4 = /*#__PURE__*/_withScopeId(function () {\n  return /*#__PURE__*/_createElementVNode(\"p\", null, \"Loading game...\", -1 /* HOISTED */);\n});\nvar _hoisted_5 = [_hoisted_4];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  var _component_GameBoard = _resolveComponent(\"GameBoard\");\n  return _openBlock(), _createElementBlock(\"div\", null, [_hoisted_1, $setup.game ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [_createElementVNode(\"p\", null, \"Turn: \" + _toDisplayString($setup.currentPlayer), 1 /* TEXT */), _createVNode(_component_GameBoard, {\n    state: $setup.game.state,\n    onMove: $setup.makeMove\n  }, null, 8 /* PROPS */, [\"state\", \"onMove\"])])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_3, [].concat(_hoisted_5)))]);\n}","map":{"version":3,"names":["_createElementVNode","key","_hoisted_4","_createElementBlock","_hoisted_1","$setup","game","_hoisted_2","_toDisplayString","currentPlayer","_createVNode","_component_GameBoard","state","onMove","makeMove","_hoisted_3","concat","_hoisted_5"],"sources":["F:\\CCT\\2 SEMESTER\\Concurrent_Systems\\CA2\\project-framework\\monster_mayhem\\src\\components\\MultiPlayerGamePlay.vue"],"sourcesContent":["<!-- src/views/MultiPlayerGamePlay.vue -->\r\n\r\n<template>\r\n    <div>\r\n      <h1>Game</h1>\r\n      <div v-if=\"game\">\r\n        <p>Turn: {{ currentPlayer }}</p>\r\n        <GameBoard :state=\"game.state\" @move=\"makeMove\" />\r\n      </div>\r\n      <div v-else>\r\n        <p>Loading game...</p>\r\n      </div>\r\n    </div>\r\n  </template>\r\n  \r\n  <script>\r\n  import { ref, onMounted } from 'vue';\r\n  import { useRoute } from 'vue-router';\r\n  import { db } from '../services/firebaseConfig';\r\n  import { doc, getDoc, updateDoc } from 'firebase/firestore';\r\n  import { getAuth } from 'firebase/auth';\r\n  import GameBoard from './GameBoard.vue';\r\n  \r\n  export default {\r\n    name: 'MultiPlayerGamePlay',\r\n    components: {\r\n      GameBoard\r\n    },\r\n    setup() {\r\n      const route = useRoute();\r\n      const auth = getAuth();\r\n      const gameId = route.params.id;\r\n      const game = ref(null);\r\n      const currentPlayer = ref('');\r\n  \r\n      const loadGame = async () => {\r\n        const gameRef = doc(db, 'games', gameId);\r\n        const gameSnap = await getDoc(gameRef);\r\n  \r\n        if (gameSnap.exists()) {\r\n          game.value = gameSnap.data();\r\n          currentPlayer.value = auth.currentUser.uid;\r\n        }\r\n      };\r\n  \r\n      const makeMove = async (move) => {\r\n        if (game.value.turn !== currentPlayer.value) {\r\n          alert('Not your turn!');\r\n          return;\r\n        }\r\n  \r\n        // Update game state with the move\r\n        const newState = { ...game.value.state, ...move };\r\n        const nextTurn = game.value.players[(game.value.players.indexOf(currentPlayer.value) + 1) % game.value.players.length];\r\n  \r\n        const gameRef = doc(db, 'games', gameId);\r\n        await updateDoc(gameRef, {\r\n          state: newState,\r\n          turn: nextTurn\r\n        });\r\n  \r\n        game.value.state = newState;\r\n        game.value.turn = nextTurn;\r\n      };\r\n  \r\n      onMounted(() => {\r\n        loadGame();\r\n      });\r\n  \r\n      return {\r\n        game,\r\n        currentPlayer,\r\n        makeMove\r\n      };\r\n    }\r\n  };\r\n  </script>\r\n  \r\n  <style scoped>\r\n  /* Styles for the game page */\r\n  </style>\r\n  "],"mappings":";;;;;sBAIMA,mBAAA,CAAa,YAAT,MAAI;AAAA;;EAJdC,GAAA;AAAA;;EAAAA,GAAA;AAAA;;sBAUQD,mBAAA,CAAsB,WAAnB,iBAAe;AAAA;kBAAlBE,UAAsB,C;;;uBAP1BC,mBAAA,CASM,cARJC,UAAa,EACFC,MAAA,CAAAC,IAAI,I,cAAfH,mBAAA,CAGM,OARZI,UAAA,GAMQP,mBAAA,CAAgC,WAA7B,QAAM,GAAAQ,gBAAA,CAAGH,MAAA,CAAAI,aAAa,kBACzBC,YAAA,CAAkDC,oBAAA;IAAtCC,KAAK,EAAEP,MAAA,CAAAC,IAAI,CAACM,KAAK;IAAGC,MAAI,EAAER,MAAA,CAAAS;mEAExCX,mBAAA,CAEM,OAXZY,UAAA,KAAAC,MAAA,CAAAC,UAAA,I","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}